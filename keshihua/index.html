<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"
    ></script>
    <title>歌曲年代变化分析</title>
    <!-- Link CSS -->
    <link rel="stylesheet" href="css/base.css" />
    <link rel="stylesheet" href="css/main.css" />
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Lobster&display=swap"
      rel="stylesheet"
    />
  </head>

  <body>
    <div class="header">
      <div style="text-align: center; font-size: 50px; font-family: 'KaiTi', '楷体', serif ; font-weight: bold; color: #45BD47; margin-top: 30px;">歌曲的视觉语言</div>
    </div>
    <!-- <div class="menu"> -->
    <!-- 预留菜单位置 -->
    <!-- </div> -->
    <div class="main clearfix">
      <div class="main-left fleft">
        <div class="box bg-title" style="margin-bottom: 30px;">
          <div style="text-align: center; font-size: 26px; font-family: 'KaiTi', '楷体', serif ; font-weight: bold; color: #45BD47;"  >年代关键词</div>
          <div id="tagBall" class="tagBall"></div>
          <br/>
          <div  style="text-align: center; text-align-last: center;margin: auto;">
            <!-- 下拉框选择年份 -->
            <select id="yearSelector" class="select" >
              <option value="1980">1980-1990</option>
              <option value="1990">1990-2020</option>
              <option value="2000">2000-2010</option>
              <option value="2010">2010-2015</option>
              <option value="2015">2015-2020</option>
              <option value="2020">2020-2024</option>
          </select>
        </div>
        </div>
      
   
 
        <script src="js/cloud.js"></script>
        <!-- <div class="box bg ranking mt30"> -->
        <div
          class="title2"
          style="
            font-weight: bold;
            font-family: 'KaiTi', '楷体', serif;
            color: #45BD47;
            font-size: 24px;
            text-align: center;
          "
        >
          常见歌词类别
        </div>
        <div class="content" style="height: 400px">
          <div id="chart1" style="width: 100%; height: 520px"></div>
          <!-- </div> -->
        </div>
      </div>
      <div class="main-center fleft">
        <div class="box center-top-bg">
          <div id="chart3" style="width: 100%; height: 570px"></div>
        </div>
        <div class="box center-bottom center-bottom-bg">
          <div class="content">
            <div id="chart55" style="width: 100%; height: 500px; margin-top: 80px;"></div>
          </div>
        </div>
      </div>
      <div class="main-right fright">
        <div class="box bg-title">
          <div style="text-align: center; font-size: 26px; font-family: 'KaiTi', '楷体', serif ; font-weight: bold; color: #45BD47;">歌曲发布排行榜</div>
          <div
            class="content"
            style="height: 360px; overflow: hidden; padding: 0 13px"
          >
            <div class="data-display">
              <!-- 切换按钮 -->
              <div
                class="radio-group"
                style="text-align: center; margin-bottom: 20px"
              >
                <!-- <button
                  class="switch-btn active"
                  id="salesBtn"
                  onclick="switchRanking('sales')"
                >
                  按销售量
                </button>
                <button
                  class="switch-btn"
                  id="amountBtn"
                  onclick="switchRanking('amount')"
                >
                  按销售额
                </button> -->
              </div>

              <!-- 排行榜 -->
              <div id="rankingList" style="max-width: 600px; margin: 0 auto">
                <!-- 数据将通过 JavaScript 动态插入 -->
              </div>

             
            </div>
          </div>
        </div>

        <div >
          <button id="showAllNodes" style="margin-bottom: 10px;margin-top: 30px;">展示所有结点</button>
          <div id="chart33" style="width: 100%; height: 570px; "></div>
        </div>
      </div>
    </div>

    <!-- JS -->
    <script src="js/jquery.min.js"></script>
    <script src="js/echarts.min.js"></script>
    <script src="js/world.js"></script>
    <script src="js/main.js"></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts/dist/echarts.min.js"
    ></script>
    <script
      type="text/javascript"
      src="https://cdn.jsdelivr.net/npm/echarts/map/js/china.js"
    ></script>
    <style>
      /* 美化切换按钮 */
      .switch-btn {
        padding: 10px 20px;
        font-size: 1em;
        color: #4caf50;
        background-color: white;
        border: 2px solid #4caf50;
        border-radius: 20px;
        margin: 0 10px;
        cursor: pointer;
        transition: all 0.3s ease;
      }

      .switch-btn.active {
        background-color: #4caf50;
        color: white;
      }

      .switch-btn:hover {
        background-color: #45a049;
        color: white;
      }

      /* 排行榜样式 */
      .ranking-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 15px;
        margin-bottom: 10px;
        background-color: #f9f9f9;
        box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        border-radius: 8px;
        font-size: 1em;
      }

      .ranking-item:nth-child(odd) {
        background-color: #f1f1f1;
      }

      .ranking-rank {
        font-weight: bold;
        font-size: 1.2em;
        color: #4caf50;
        display: flex;
        align-items: center;
      }

      .ranking-rank.medal {
        font-size: 1.5em;
        margin-right: 10px;
      }

      .ranking-rank.gold {
        color: gold;
      }

      .ranking-rank.silver {
        color: silver;
      }

      .ranking-rank.bronze {
        color: #cd7f32;
      }

      .ranking-province {
        flex: 1;
        text-align: left;
        margin-left: 20px;
        font-size: 1em;
        color: #333;
      }

      .ranking-value {
        font-weight: bold;
        font-size: 1em;
        color: #555;
      }
    </style>

    <script>

      var tagEle =
          "querySelectorAll" in document
            ? document.querySelectorAll(".tag")
            : getClass("tag"),
        paper =
          "querySelectorAll" in document
            ? document.querySelector(".tagBall")
            : getClass("tagBall")[0];
      (RADIUS = 100),
        (fallLength = 300),
        (tags = []),
        (angleX = Math.PI / 300),
        (angleY = Math.PI / 300),
        (CX = paper.offsetWidth / 2),
        (CY = paper.offsetHeight / 2),
        (EX =
          paper.offsetLeft +
          document.body.scrollLeft +
          document.documentElement.scrollLeft),
        (EY =
          paper.offsetTop +
          document.body.scrollTop +
          document.documentElement.scrollTop);

      function getClass(className) {
        var ele = document.getElementsByTagName("*");
        var classEle = [];
        for (var i = 0; i < ele.length; i++) {
          var cn = ele[i].className;
          if (cn === className) {
            classEle.push(ele[i]);
          }
        }
        return classEle;
      }

      function innitCloud() {
        for (var i = 0; i < tagEle.length; i++) {
          var a, b;
          var k = (2 * (i + 1) - 1) / tagEle.length - 1;
          var a = Math.acos(k);
          var b = a * Math.sqrt(tagEle.length * Math.PI);
          // var a = Math.random()*2*Math.PI;
          // var b = Math.random()*2*Math.PI;
          var x = RADIUS * Math.sin(a) * Math.cos(b);
          var y = RADIUS * Math.sin(a) * Math.sin(b);
          var z = RADIUS * Math.cos(a);
          var t = new tag(tagEle[i], x, y, z);
          tagEle[i].style.color =
            "rgb(" +
            parseInt(Math.random() * 255) +
            "," +
            parseInt(Math.random() * 255) +
            "," +
            parseInt(Math.random() * 255) +
            ")";
          tags.push(t);
          t.move();
        }
      }

      /*----------------------------*/
      function animate() {
        setInterval(function () {
          rotateX();
          rotateY();
          tags.forEach(function () {
            this.move();
          });
        }, 17);
      }

      if ("addEventListener" in window) {
        paper.addEventListener("mousemove", function (event) {
          var x = event.clientX - EX - CX;
          var y = event.clientY - EY - CY;
          // angleY = -x* (Math.sqrt(Math.pow(x , 2) + Math.pow(y , 2)) > RADIUS/4 ? 0.0002 : 0.0001);
          // angleX = -y* (Math.sqrt(Math.pow(x , 2) + Math.pow(y , 2)) > RADIUS/4 ? 0.0002 : 0.0001);
          angleY = x * 0.0001; //调节半径
          angleX = y * 0.0001;
        });
      } else {
        paper.attachEvent("onmousemove", function (event) {
          var x = event.clientX - EX - CX;
          var y = event.clientY - EY - CY;
          angleY = x * 0.0001;
          angleX = y * 0.0001;
        });
      }

      function rotateX() {
        var cos = Math.cos(angleX);
        var sin = Math.sin(angleX);
        tags.forEach(function () {
          var y1 = this.y * cos - this.z * sin;
          var z1 = this.z * cos + this.y * sin;
          this.y = y1;
          this.z = z1;
        });
      }

      function rotateY() {
        var cos = Math.cos(angleY);
        var sin = Math.sin(angleY);
        tags.forEach(function () {
          var x1 = this.x * cos - this.z * sin;
          var z1 = this.z * cos + this.x * sin;
          this.x = x1;
          this.z = z1;
        });
      }

      var tag = function (ele, x, y, z) {
        this.ele = ele;
        this.x = x;
        this.y = y;
        this.z = z;
      };

      tag.prototype = {
        move: function () {
          var scale = fallLength / (fallLength - this.z);
          var alpha = (this.z + RADIUS) / (2 * RADIUS);
          this.ele.style.fontSize = 15 * scale + "px";
          this.ele.style.opacity = alpha + 0.5;
          this.ele.style.filter =
            "alpha(opacity = " + (alpha + 0.5) * 100 + ")";
          this.ele.style.zIndex = parseInt(scale * 100);
          this.ele.style.left = this.x + CX - this.ele.offsetWidth / 2 + "px";
          this.ele.style.top = this.y + CY - this.ele.offsetHeight / 2 + "px";
        },
      };

      innitCloud();
      animate();
      tags.forEach = function (callback) {
        for (var i = 0; i < this.length; i++) {
          if (typeof callback != undefined) callback.call(this[i]);
        }
      };


    </script>
  </body>
</html>
